<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Password - Cabana</title>
    <meta name="description" content="Create a new password for your Cabana account.">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/tailwindcss/2.2.19/tailwind.min.css" rel="stylesheet">
    <style>
        .gradient-bg { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
        .glass-effect { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255, 255, 255, 0.2); }
    </style>
</head>
<body class="gradient-bg min-h-screen">
    <!-- Navigation -->
    <nav class="glass-effect p-4">
        <div class="container mx-auto flex justify-between items-center">
            <a href="/index.html" class="text-white text-2xl font-bold">Cabana</a>
        </div>
    </nav>

    <!-- Reset Password Form -->
    <main class="container mx-auto px-4 py-20">
        <div class="max-w-md mx-auto">
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-white mb-4">Create New Password</h1>
                <p class="text-purple-100">Enter your new password below</p>
            </div>

            <div class="glass-effect p-8 rounded-lg">
                <form id="resetPasswordForm" class="space-y-6">
                    <div>
                        <label for="password" class="block text-purple-100 mb-2">New Password</label>
                        <input type="password" id="password" name="password" required 
                               placeholder="Enter new password"
                               class="w-full px-4 py-3 rounded-lg bg-white/10 border border-purple-300/30 text-white placeholder-purple-200 focus:outline-none focus:border-purple-300">
                        <div class="mt-2">
                            <div class="text-purple-200 text-sm">Password requirements:</div>
                            <ul class="text-purple-200 text-xs mt-1 space-y-1">
                                <li id="length-check" class="flex items-center">
                                    <span class="w-4 h-4 rounded-full border border-purple-300 mr-2 flex items-center justify-center">
                                        <span class="hidden text-green-400 text-xs">‚úì</span>
                                    </span>
                                    At least 8 characters
                                </li>
                                <li id="uppercase-check" class="flex items-center">
                                    <span class="w-4 h-4 rounded-full border border-purple-300 mr-2 flex items-center justify-center">
                                        <span class="hidden text-green-400 text-xs">‚úì</span>
                                    </span>
                                    One uppercase letter
                                </li>
                                <li id="lowercase-check" class="flex items-center">
                                    <span class="w-4 h-4 rounded-full border border-purple-300 mr-2 flex items-center justify-center">
                                        <span class="hidden text-green-400 text-xs">‚úì</span>
                                    </span>
                                    One lowercase letter
                                </li>
                                <li id="number-check" class="flex items-center">
                                    <span class="w-4 h-4 rounded-full border border-purple-300 mr-2 flex items-center justify-center">
                                        <span class="hidden text-green-400 text-xs">‚úì</span>
                                    </span>
                                    One number
                                </li>
                            </ul>
                        </div>
                    </div>

                    <div>
                        <label for="confirmPassword" class="block text-purple-100 mb-2">Confirm New Password</label>
                        <input type="password" id="confirmPassword" name="confirmPassword" required 
                               placeholder="Confirm new password"
                               class="w-full px-4 py-3 rounded-lg bg-white/10 border border-purple-300/30 text-white placeholder-purple-200 focus:outline-none focus:border-purple-300">
                        <div id="password-match" class="mt-2 text-sm hidden">
                            <span class="text-red-400">Passwords do not match</span>
                        </div>
                    </div>

                    <button type="submit" id="submitButton" disabled
                            class="w-full bg-gray-500 text-white py-3 rounded-lg font-semibold transition duration-300 cursor-not-allowed">
                        Reset Password
                    </button>
                </form>

                <!-- Success Message (hidden by default) -->
                <div id="successMessage" class="hidden mt-6 p-4 glass-effect rounded-lg">
                    <div class="text-center">
                        <div class="text-green-400 text-4xl mb-4">‚úì</div>
                        <h3 class="text-white font-semibold mb-2">Password Reset Successful</h3>
                        <p class="text-purple-100 text-sm mb-4">
                            Your password has been successfully reset. You can now login with your new password.
                        </p>
                        <a href="/auth/login.html" 
                           class="inline-block bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700 transition duration-300">
                            Go to Login
                        </a>
                    </div>
                </div>
            </div>

            <!-- Security Tips -->
            <div class="mt-8 glass-effect p-6 rounded-lg">
                <h3 class="text-white font-semibold mb-3">üõ°Ô∏è Security Tips</h3>
                <div class="text-purple-100 text-sm space-y-2">
                    <p>‚Ä¢ Use a unique password you don't use elsewhere</p>
                    <p>‚Ä¢ Consider using a password manager</p>
                    <p>‚Ä¢ Enable two-factor authentication in your account settings</p>
                    <p>‚Ä¢ Never share your password with anyone</p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="glass-effect p-8 mt-20">
        <div class="container mx-auto text-center text-purple-100">
            <p>&copy; 2024 Cabana. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const passwordInput = document.getElementById('password');
        const confirmPasswordInput = document.getElementById('confirmPassword');
        const submitButton = document.getElementById('submitButton');
        const form = document.getElementById('resetPasswordForm');
        const successMessage = document.getElementById('successMessage');
        
        // Password validation
        function validatePassword() {
            const password = passwordInput.value;
            
            // Check length
            const lengthCheck = document.getElementById('length-check');
            if (password.length >= 8) {
                lengthCheck.querySelector('span span').classList.remove('hidden');
                lengthCheck.classList.add('text-green-400');
            } else {
                lengthCheck.querySelector('span span').classList.add('hidden');
                lengthCheck.classList.remove('text-green-400');
            }
            
            // Check uppercase
            const uppercaseCheck = document.getElementById('uppercase-check');
            if (/[A-Z]/.test(password)) {
                uppercaseCheck.querySelector('span span').classList.remove('hidden');
                uppercaseCheck.classList.add('text-green-400');
            } else {
                uppercaseCheck.querySelector('span span').classList.add('hidden');
                uppercaseCheck.classList.remove('text-green-400');
            }
            
            // Check lowercase
            const lowercaseCheck = document.getElementById('lowercase-check');
            if (/[a-z]/.test(password)) {
                lowercaseCheck.querySelector('span span').classList.remove('hidden');
                lowercaseCheck.classList.add('text-green-400');
            } else {
                lowercaseCheck.querySelector('span span').classList.add('hidden');
                lowercaseCheck.classList.remove('text-green-400');
            }
            
            // Check number
            const numberCheck = document.getElementById('number-check');
            if (/[0-9]/.test(password)) {
                numberCheck.querySelector('span span').classList.remove('hidden');
                numberCheck.classList.add('text-green-400');
            } else {
                numberCheck.querySelector('span span').classList.add('hidden');
                numberCheck.classList.remove('text-green-400');
            }
            
            return password.length >= 8 && /[A-Z]/.test(password) && /[a-z]/.test(password) && /[0-9]/.test(password);
        }
        
        // Check password match
        function checkPasswordMatch() {
            const password = passwordInput.value;
            const confirmPassword = confirmPasswordInput.value;
            const matchElement = document.getElementById('password-match');
            
            if (confirmPassword && password !== confirmPassword) {
                matchElement.classList.remove('hidden');
                return false;
            } else {
                matchElement.classList.add('hidden');
                return true;
            }
        }
        
        // Enable/disable submit button
        function updateSubmitButton() {
            const isPasswordValid = validatePassword();
            const isPasswordMatch = checkPasswordMatch();
            const confirmPassword = confirmPasswordInput.value;
            
            if (isPasswordValid && isPasswordMatch && confirmPassword) {
                submitButton.disabled = false;
                submitButton.classList.remove('bg-gray-500', 'cursor-not-allowed');
                submitButton.classList.add('bg-purple-600', 'hover:bg-purple-700');
            } else {
                submitButton.disabled = true;
                submitButton.classList.add('bg-gray-500', 'cursor-not-allowed');
                submitButton.classList.remove('bg-purple-600', 'hover:bg-purple-700');
            }
        }
        
        // Event listeners
        passwordInput.addEventListener('input', updateSubmitButton);
        confirmPasswordInput.addEventListener('input', updateSubmitButton);
        
        // Form submission
        form.addEventListener('submit', function(e) {
            e.preventDefault();
            
            if (!submitButton.disabled) {
                form.classList.add('hidden');
                successMessage.classList.remove('hidden');
            }
        });
        
        // Check for reset token in URL (would be handled by backend)
        const urlParams = new URLSearchParams(window.location.search);
        const token = urlParams.get('token');
        
        if (!token) {
            // Redirect to forgot password if no token
            window.location.href = '/auth/forgot-password.html';
        }
    </script>
</body>
</html>
